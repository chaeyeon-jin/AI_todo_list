<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React to-do app</title>
    <!-- React CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Supabase Client CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dongle&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="bg-blue-50">
    <div id="root"></div>
    <script type="text/babel">
      const API_URL = 'http://localhost:3002/api/todos';
      
      // Supabase 클라이언트 초기화
      // ⚠️ 본인의 Supabase 프로젝트 값으로 변경하세요
      const SUPABASE_URL = 'https://cjzpkqkqvpddcrmljjcc.supabase.co';
      const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqenBrcWtxdnBkZGNybWxqamNjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNjg3NjAsImV4cCI6MjA3NTk0NDc2MH0.HE_Qt747kNXcU29lES-ZEfPOeMQerWE-VucBlYw6CXU';
      const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

      // 로그인/회원가입 컴포넌트
      function AuthSection({ onAuthSuccess }) {
        const [isLogin, setIsLogin] = React.useState(true);
        const [email, setEmail] = React.useState('');
        const [password, setPassword] = React.useState('');
        const [loading, setLoading] = React.useState(false);
        const [message, setMessage] = React.useState('');

        // 회원가입: supabase.auth.signUp()
        const handleSignUp = async (e) => {
          e.preventDefault();
          setLoading(true);
          setMessage('');

          try {
            const { data, error } = await supabase.auth.signUp({
              email: email,
              password: password
            });

            if (error) {
              setMessage('❌ ' + error.message);
            } else {
              if (data.user && !data.session) {
                setMessage('✅ 가입 완료! 이메일을 확인해주세요.');
              } else if (data.session) {
                setMessage('✅ 회원가입 성공!');
                onAuthSuccess(data.user);
              } else {
                setMessage('✅ 회원가입 완료! 로그인해주세요.');
                setIsLogin(true);
              }
            }
          } catch (err) {
            console.error('Supabase 연결 에러:', err);
            setMessage('❌ Supabase 서버에 연결할 수 없습니다.\n\n해결 방법:\n1. Supabase Dashboard에서 프로젝트 상태 확인\n2. Project URL이 올바른지 확인\n3. 프로젝트 생성 후 2-3분 대기');
          } finally {
            setLoading(false);
          }
        };

        // 로그인: supabase.auth.signInWithPassword()
        const handleSignIn = async (e) => {
          e.preventDefault();
          setLoading(true);
          setMessage('');

          try {
            const { data, error } = await supabase.auth.signInWithPassword({
              email: email,
              password: password
            });

            if (error) {
              setMessage('❌ ' + error.message);
            } else {
              setMessage('✅ 로그인 성공!');
              onAuthSuccess(data.user);
            }
          } catch (err) {
            console.error('Supabase 연결 에러:', err);
            setMessage('❌ Supabase 서버에 연결할 수 없습니다.\n\n해결 방법:\n1. Supabase Dashboard에서 프로젝트 상태 확인\n2. Project URL이 올바른지 확인\n3. 프로젝트 생성 후 2-3분 대기');
          } finally {
            setLoading(false);
          }
        };

        return (
          <div className="font-[Dongle] max-w-md mx-auto mt-8 p-8 bg-white rounded-lg shadow-lg border border-blue-200">
            <h2 className="text-3xl md:text-6xl text-blue-400 mb-6 text-center font-bold">
              {isLogin ? '로그인' : '회원가입'}
            </h2>
            
            <form onSubmit={isLogin ? handleSignIn : handleSignUp}>
              <div className="mb-4">
                <label className="block text-2xl mb-2 text-gray-700 font-medium">이메일</label>
                <input
                  type="email"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  required
                  className="w-full text-xl px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
                  placeholder="user@example.com"
                />
              </div>

              <div className="mb-6">
                <label className="block text-2xl mb-2 text-gray-700 font-medium">비밀번호</label>
                <input
                  type="password"
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                  required
                  minLength="6"
                  className="w-full text-xl px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
                  placeholder="최소 6자 이상"
                />
              </div>

              {message && (
                <div className={`mb-4 p-3 rounded-lg text-lg ${
                  message.startsWith('✅') ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'
                }`}>
                  {message}
                </div>
              )}

              <button
                type="submit"
                disabled={loading}
                className={`w-full text-xl py-3 rounded-lg font-medium transition-colors ${
                  loading 
                    ? 'bg-gray-400 cursor-not-allowed' 
                    : 'bg-blue-400 hover:bg-blue-500 text-white'
                }`}
              >
                {loading ? '처리 중...' : (isLogin ? '로그인' : '회원가입')}
              </button>
            </form>

            <div className="mt-4 text-center">
              <button
                onClick={() => {
                  setIsLogin(!isLogin);
                  setMessage('');
                  setEmail('');
                  setPassword('');
                }}
                className="text-blue-500 hover:text-blue-700 text-lg"
              >
                {isLogin ? '계정이 없으신가요? 회원가입' : '이미 계정이 있으신가요? 로그인'}
              </button>
            </div>

            
          </div>
        );
      }

      function AIPlanningSection({ onAddMultipleTodos }) {
        const [goalText, setGoalText] = React.useState('');
        const [loading, setLoading] = React.useState(false);
        const [generatedTodos, setGeneratedTodos] = React.useState([]);
        const [selectedTodos, setSelectedTodos] = React.useState([]);
        const [error, setError] = React.useState('');

        const handleGenerateTodos = async () => {
          if (!goalText || goalText.trim() === '') {
            alert('목표를 입력하세요!');
            return;
          }

          setLoading(true);
          setError('');
          setGeneratedTodos([]);

          try {
            // 백엔드 AI API 호출
            const response = await fetch('http://localhost:3002/api/ai/generate-todos', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({ goal: goalText.trim() })
            });

            const data = await response.json();

            if (!response.ok || !data.success) {
              throw new Error(data.error || 'AI 처리 중 오류가 발생했습니다.');
            }

            console.log('✅ AI 생성 완료:', data.todos);
            setGeneratedTodos(data.todos);
            setSelectedTodos([]); // 선택 초기화
          } catch (err) {
            setError(err.message || 'AI 처리 중 오류가 발생했습니다.');
            console.error('AI 요청 에러:', err);
          } finally {
            setLoading(false);
          }
        };

        const toggleTodoSelection = (index) => {
          if (selectedTodos.includes(index)) {
            setSelectedTodos(selectedTodos.filter(i => i !== index));
          } else {
            setSelectedTodos([...selectedTodos, index]);
          }
        };

        const handleAddSelectedTodos = () => {
          if (selectedTodos.length === 0) {
            alert('추가할 할일을 선택해주세요!');
            return;
          }
          
          const todosToAdd = selectedTodos
            .sort((a, b) => a - b) // 순서대로 정렬
            .map(index => generatedTodos[index]);
          
          onAddMultipleTodos(todosToAdd);
          setGeneratedTodos([]);
          setSelectedTodos([]);
          setGoalText('');
          alert(`${todosToAdd.length}개의 할일이 추가되었습니다!`);
        };

        const handleAddAllTodos = () => {
          if (generatedTodos.length === 0) return;
          onAddMultipleTodos(generatedTodos);
          setGeneratedTodos([]);
          setSelectedTodos([]);
          setGoalText('');
          alert(`${generatedTodos.length}개의 할일이 추가되었습니다!`);
        };

        return (
          <div className="border border-purple-200 bg-purple-100 rounded-lg p-6 mb-6">
            <h2 className="text-2xl md:text-3xl text-purple-600 mb-4 text-center font-bold">
              🤖 AI로 계획 세우기
            </h2>
            <p className="text-lg md:text-xl text-gray-600 mb-4 text-center">
              큰 목표를 입력하면 AI가 실행 가능한 단계로 쪼개드립니다
            </p>
            
            <div className="space-y-4">
              <textarea
                value={goalText}
                onChange={(e) => setGoalText(e.target.value)}
                placeholder="예: '웹 개발 공부하기', '건강한 생활습관 만들기', '프로젝트 완성하기' 등"
                className="w-full text-xl md:text-2xl px-4 py-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none resize-none"
                rows="3"
              />
              
              <div className="flex gap-2">
                <button
                  onClick={handleGenerateTodos}
                  disabled={loading || !goalText.trim()}
                  className={`flex-1 text-xl md:text-2xl py-3 rounded-lg font-medium transition-colors ${
                    loading || !goalText.trim()
                      ? 'bg-gray-200 cursor-not-allowed'
                      : 'bg-purple-500 hover:bg-purple-600 text-white'
                  }`}
                >
                  {loading ? '🤖 AI가 생각중...' : '✨ AI로 쪼개기'}
                </button>
              </div>

              {error && (
                <div className="p-3 bg-red-100 text-red-700 rounded-lg text-lg">
                  {error}
                </div>
              )}

              {generatedTodos.length > 0 && (
                <div className="mt-4 p-4 bg-white rounded-lg border border-purple-200">
                  <div className="flex justify-between items-center mb-3">
                    <h3 className="text-xl md:text-2xl font-semibold text-gray-800">
                      📌 생성된 할일 목록 ({generatedTodos.length}개)
                    </h3>
                    <div className="flex gap-2">
                      <button
                        onClick={handleAddSelectedTodos}
                        disabled={selectedTodos.length === 0}
                        className={`px-4 py-2 rounded-lg text-lg md:text-xl transition-colors ${
                          selectedTodos.length === 0
                            ? 'bg-gray-300 cursor-not-allowed text-gray-500'
                            : 'bg-blue-500 hover:bg-blue-600 text-white'
                        }`}
                      >
                        선택 추가 ({selectedTodos.length})
                      </button>
                      <button
                        onClick={handleAddAllTodos}
                        className="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-lg md:text-xl transition-colors"
                      >
                        전체 추가 →
                      </button>
                    </div>
                  </div>
                  <ul className="space-y-2">
                    {generatedTodos.map((todo, index) => (
                      <li
                        key={index}
                        className={`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${
                          selectedTodos.includes(index)
                            ? 'bg-purple-100 border-2 border-purple-400'
                            : 'bg-purple-50 border-2 border-transparent hover:bg-purple-100'
                        }`}
                        onClick={() => toggleTodoSelection(index)}
                      >
                        <input
                          type="checkbox"
                          checked={selectedTodos.includes(index)}
                          onChange={() => toggleTodoSelection(index)}
                          className="w-5 h-5 text-purple-600 cursor-pointer"
                          onClick={(e) => e.stopPropagation()}
                        />
                        <span className="text-purple-600 font-bold text-xl">
                          {index + 1}.
                        </span>
                        <span className="text-gray-700 text-xl flex-1">
                          {todo}
                        </span>
                      </li>
                    ))}
                  </ul>
                  <p className="text-sm md:text-base text-gray-500 mt-3 text-center">
                    💡 클릭하거나 체크박스를 선택하여 원하는 할일만 추가할 수 있습니다
                  </p>
                </div>
              )}
            </div>
          </div>
        );
      }

      function AddTodoSection({
        setInputText,
        inputText,
        addTodo,
        activeEnter,
      }) {
        return (
          <div className="border border-blue-200 bg-white rounded-lg p-6 mb-6 text-center">
            <h2 className="text-2xl md:text-3xl text-gray-800 mb-4">할일 추가하기</h2>
            <div className="flex gap-2">
              <input
                type="text"
                onChange={(e) => setInputText(e.target.value)}
                onKeyDown={(e) => activeEnter(e)}
                value={inputText}
                placeholder="새로운 할일을 입력하세요..."
                className="flex-1 text-xl md:text-2xl px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"
              ></input>
              <button
                onClick={() => {
                  if (!inputText || inputText.trim() === "") {
                    alert("값을 입력하세요!");
                    return;
                  } else {
                    addTodo();
                  }
                }}
                className="bg-blue-400 hover:bg-blue-500 text-white px-6 py-2 rounded-lg font-medium text-xl md:text-2xl transition-colors"
              >
                추가
              </button>
            </div>
          </div>
        );
      }

      function TodoListSection({
        todos,
        toggleTodo,
        deleteTodo,
        editTodo,
        filteredTodo,
      }) {
        return (
          <div className="border border-blue-200 md:col-span-2 bg-white rounded-lg p-6">
            <h2 className="text-xl md:text-2xl font-semibold text-gray-800 mb-4">
              할일 목록
            </h2>

            <div id="todoList" className="space-y-2">
              {todos.length === 0 ? (
                <p className="text-gray-600 text-xl md:text-2xl"> 할 일이 없습니다.</p>
              ) : (
                <ul>
                  {filteredTodo.map((todo) => (
                    <li key={todo.id}>
                      <div className="flex items-center gap-3 p-3 m-3 bg-gray-50 rounded-lg">
                        <input
                          type="checkbox"
                          checked={todo.completed}
                          onChange={() => toggleTodo(todo.id)}
                          className="w-5 h-5 text-blue-600"
                        ></input>
                        <span
                          className={
                            todo.completed
                              ? "flex-1 text-gray-400 text-2xl line-through"
                              : "flex-1 text-gray-700 text-2xl"
                          }
                        >
                          {todo.text}
                        </span>
                        <button
                          onClick={() => editTodo(todo.id, todo.text)}
                          className="text-blue-500 hover:text-blue-700 px-2 py-1 text-2xl rounded"
                        >
                          수정
                        </button>
                        <button
                          onClick={() => deleteTodo(todo.id)}
                          className="text-red-500 hover:text-red-700 px-2 py-1 text-2xl rounded"
                        >
                          삭제
                        </button>
                      </div>
                    </li>
                  ))}
                </ul>
              )}
            </div>
          </div>
        );
      }

      function StatsSection({ total, completed, remaining }) {
        return (
          <div className="border border-blue-200 md:col-span-1 rounded-lg bg-white p-6">
            <h3 className="text-xl md:text-2xl font-semibold text-gray-800 mb-3">
              진행 현황
            </h3>
            <div className="grid grid-cols-3 gap-4 text-center">
              <div>
                <div
                  id="totalCount"
                  className="text-4xl font-bold text-blue-400"
                >
                  {total}
                </div>
                <div className="text-xl text-gray-500">전체</div>
              </div>
              <div>
                <div
                  id="completedCount"
                  className="text-4xl font-bold text-pink-400"
                >
                  {completed}
                </div>
                <div className="text-xl text-gray-500">완료</div>
              </div>
              <div>
                <div
                  id="remainingCount"
                  className="text-4xl font-bold text-yellow-400"
                >
                  {remaining}
                </div>
                <div className="text-xl text-gray-500">남은 일</div>
              </div>
            </div>
          </div>
        );
      }

      function ButtonsSection({setFilter, completeAll, deleteAll}){
        return (<div className="flex border border-blue-200 bg-white rounded-lg p-6 mb-6">
                <div className="flex-1">
                  <button
                    className="bg-blue-100 text-xl md:text-2xl rounded-lg px-3 py-1 mx-2 hover:bg-blue-300"
                    onClick={() => setFilter("all")}
                  >
                    전체
                  </button>
                  <button
                    className="bg-pink-100 text-xl md:text-2xl rounded-lg px-3 py-1 mx-2 hover:bg-pink-300"
                    onClick={() => setFilter("completed")}
                  >
                    완료
                  </button>
                  <button
                    className="bg-yellow-100 text-xl md:text-2xl rounded-lg px-3 py-1 mx-2 hover:bg-yellow-200"
                    onClick={() => setFilter("remaining")}
                  >
                    진행중
                  </button>
                </div>

                <div className="col-span-1">
                  <button
                    className="bg-gray-200 text-xl md:text-2xl rounded-lg px-3 py-1 mx-2 hover:bg-blue-300"
                    onClick={() => completeAll()}
                  >
                    전체 완료
                  </button>
                  <button
                    className="bg-gray-200 text-xl md:text-2xl rounded-lg px-3 py-1 mx-2 hover:bg-red-300"
                    onClick={() => deleteAll()}
                  >
                    전체 삭제
                  </button>
                </div>
              </div>
            )
      }

      function TodoApp() {
        const [user, setUser] = React.useState(null);
        const [loading, setLoading] = React.useState(true);
        const [todos, setTodos] = React.useState([]);
        const [inputText, setInputText] = React.useState("");

        // 사용자 확인: supabase.auth.getUser()
        React.useEffect(() => {
          checkUser();
        }, []);

        const checkUser = async () => {
          try {
            const { data: { session } } = await supabase.auth.getSession();
            setUser(session?.user || null);
          } catch (error) {
            console.error('⚠️ Supabase 연결 실패:', error);
            console.error('📌 해결 방법:');
            console.error('1. Supabase Dashboard에서 프로젝트 상태 확인');
            console.error('2. Project URL이 올바른지 확인');
            console.error('3. 프로젝트 생성 후 2-3분 대기');
            // 임시로 인증 없이 진행 (테스트용)
            setUser({ email: 'test@example.com (테스트 모드)' });
          } finally {
            setLoading(false);
          }
        };

        // 로그아웃: supabase.auth.signOut()
        const handleSignOut = async () => {
          const confirmed = confirm('로그아웃 하시겠습니까?');
          if (confirmed) {
            await supabase.auth.signOut();
            setUser(null);
            setTodos([]);
          }
        };

        const addTodo = async () => {
          if (!inputText || inputText.trim() === "") {
            alert("값을 입력하세요!");
            return;
          }

          try {
            // Supabase에 직접 삽입 (RLS가 자동으로 user_id 설정)
            const { data, error } = await supabase
              .from('todos')
              .insert([{ 
                text: inputText.trim(), 
                completed: false,
                user_id: user.id
              }])
              .select()
              .single();

            if (error) {
              console.error('추가 실패:', error);
              alert('추가 실패: ' + error.message);
            } else {
              console.log('✅ Todo 추가 성공:', data);
              setTodos([...todos, data]);
              setInputText("");
            }
          } catch (err) {
            console.error('추가 실패:', err);
            alert('추가 실패');
          }
        };

        // AI로 생성된 여러 할일을 한번에 추가
        const addMultipleTodos = async (todoTexts) => {
          try {
            const todoItems = todoTexts.map(text => ({
              text: text.trim(),
              completed: false,
              user_id: user.id
            }));

            const { data, error } = await supabase
              .from('todos')
              .insert(todoItems)
              .select();

            if (error) {
              console.error('일괄 추가 실패:', error);
              alert('추가 실패: ' + error.message);
            } else {
              console.log(`✅ ${data.length}개의 Todo 추가 성공`);
              setTodos([...todos, ...data]);
            }
          } catch (err) {
            console.error('일괄 추가 실패:', err);
            alert('추가 실패');
          }
        };

        const activeEnter = (e) => {
          if(e.key === "Enter"){
            e.preventDefault();
             addTodo();
            }
          };

        const toggleTodo = async (id) => {
          const todo = todos.find(t => t.id === id);
          try {
            // Supabase에 직접 업데이트 (RLS가 자동으로 본인 데이터만 수정)
            const { data, error } = await supabase
              .from('todos')
              .update({ completed: !todo.completed })
              .eq('id', id)
              .select()
              .single();

            if (error) {
              console.error('수정 실패:', error);
              alert('수정 실패: ' + error.message);
            } else {
              console.log('✅ Todo 완료 토글:', data);
              setTodos(todos.map(t => t.id === id ? data : t));
            }
          } catch (err) {
            console.error('수정 실패:', err);
          }
        };

        const deleteTodo = async (id) => {
          try {
            // Supabase에서 직접 삭제 (RLS가 자동으로 본인 데이터만 삭제)
            const { error } = await supabase
              .from('todos')
              .delete()
              .eq('id', id);

            if (error) {
              console.error('삭제 실패:', error);
              alert('삭제 실패: ' + error.message);
            } else {
              console.log('✅ Todo 삭제 성공');
              setTodos(todos.filter(t => t.id !== id));
            }
          } catch (err) {
            console.error('삭제 실패:', err);
          }
        };

        const editTodo = async (id, currentText) => {
          const newText = prompt("할일을 수정하세요:", currentText);
          if (newText !== null && newText.trim() !== "") {
            try {
              // Supabase에 직접 업데이트 (RLS가 자동으로 본인 데이터만 수정)
              const { data, error } = await supabase
                .from('todos')
                .update({ text: newText.trim() })
                .eq('id', id)
                .select()
                .single();

              if (error) {
                console.error('수정 실패:', error);
                alert('수정 실패: ' + error.message);
              } else {
                console.log('✅ Todo 텍스트 수정:', data);
                setTodos(todos.map(t => t.id === id ? data : t));
              }
            } catch (err) {
              console.error('수정 실패:', err);
            }
          }
        };

        const total = todos.length;
        const completed = todos.filter((todo) => todo.completed).length;
        const remaining = total - completed;

        const [filter, setFilter] = React.useState("all");

        const filterTodos = (todo) => {
          if (filter === "all") return true;
          if (filter === "completed") return todo.completed === true;
          if (filter === "remaining") return todo.completed === false;
        };

        const filteredTodo = todos.filter(filterTodos);

        const deleteAll = () => {
          const confirmed = confirm("모든 목록을 삭제하시겠습니까?");
          if (confirmed) {
            setTodos([]);
          }
        };

        const completeAll = () => {
          const allDone = todos.map((todo) => {
              return { ...todo, completed: true };
            });

          setTodos(allDone);
        };

        React.useEffect(() => {
          // 로그인된 사용자만 Todo 불러오기
          if (user && user.id) {
            const fetchTodos = async () => {
              try {
                console.log('📋 사용자 Todo 불러오는 중...', user.email);
                // Supabase에서 직접 조회 (RLS가 자동으로 본인 데이터만 필터링)
                const { data, error } = await supabase
                  .from('todos')
                  .select('*')
                  .order('id', { ascending: true });

                if (error) {
                  console.error('❌ 조회 실패:', error);
                } else {
                  console.log(`✅ ${data.length}개의 Todo 로드 완료`);
                  setTodos(data);
                }
              } catch (err) {
                console.error('❌ 조회 실패:', err);
              }
            };
            
            fetchTodos();
          }
        }, [user]);

        // 로딩 중
        if (loading) {
          return (
            <div className="flex items-center justify-center h-screen">
              <div className="text-3xl text-gray-600 font-[Dongle]">로딩 중...</div>
            </div>
          );
        }

        // 로그인 안 된 경우
        if (!user) {
          return (
            <div className="min-h-screen bg-yellow-50 py-10">
              <div className="max-w-5xl mx-auto px-4">
                <header className="text-center mb-8">
                  <h1 className="text-5xl md:text-7xl text-blue-400 mb-4 font-[Dongle]">
                    채연의 To-do List
                  </h1>
                  <p className="text-2xl text-gray-600 font-[Dongle]">🔐 로그인이 필요합니다</p>
                </header>
                <AuthSection onAuthSuccess={(user) => setUser(user)} />
              </div>
            </div>
          );
        }

        // 로그인 된 경우 - Todo 앱 표시
        return (
          <>
            <div className="max-w-5xl mx-auto p-10 font-[Dongle]">
              <header className="text-center mb-8">
                <h1 className="text-5xl md:text-7xl text-blue-400 mb-2">
                  채연의 To-do List
                </h1>
                <div className="flex justify-center items-center gap-4">
                  <p className="text-2xl text-gray-600">
                    {user.email}님 환영합니다! 👋
                  </p>
                  <button
                    onClick={handleSignOut}
                    className="bg-red-400 hover:bg-red-500 text-white px-4 py-2 rounded-lg text-xl transition-colors"
                  >
                    로그아웃
                  </button>
                </div>
              </header>

              <AIPlanningSection
                onAddMultipleTodos={addMultipleTodos}
              />

              <AddTodoSection
                setInputText={setInputText}
                inputText={inputText}
                addTodo={addTodo}
                activeEnter={activeEnter}
              />

              <ButtonsSection
                setFilter={setFilter}
                completeAll={completeAll}
                deleteAll={deleteAll}
              />

              <div className="flex flex-col md:grid md:grid-cols-3 gap-6">
                <TodoListSection
                  todos={todos}
                  toggleTodo={toggleTodo}
                  deleteTodo={deleteTodo}
                  editTodo={editTodo}
                  filteredTodo={filteredTodo}
                />

                <StatsSection
                  total={total}
                  completed={completed}
                  remaining={remaining}
                />
              </div>
            </div>
          </>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<TodoApp />);
    </script>
  </body>
</html>
